fragment MetafieldFragment on Metafield {
  id
  type
  namespace
  key
  value
  description
  reference @include(if: $includeReferenceMetafieldDetails){
    ... on Product {
      handle
      id
      title
      compareAtPriceRange {
        maxVariantPrice {
          ...MoneyFragment
        }
        minVariantPrice {
          ...MoneyFragment
        }
      }
      priceRange {
        maxVariantPrice {
          ...MoneyFragment
        }
        minVariantPrice {
          ...MoneyFragment
        }
      }
      variants (first: 1) {
        edges {
          node {
            id
            title
            availableForSale
            image {
              ...ImageFragment
            }
            priceV2 {
              ...MoneyFragment
            }
            compareAtPriceV2 {
              ...MoneyFragment
            }
            selectedOptions {
              name
              value
            }
          }
        }
      }
    }
  }
}